{% extends "base.html" %}

{% block title %}Profil{% endblock %}

{% block content %}
<div class="row">
    <div class="col-4">
        <div class="card text-center">
            <div style="padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <i class="fas fa-user-circle" style="font-size: 6rem;"></i>
                <h2 style="margin-top: 1rem;">{{ user.username }}</h2>
                <p>{{ user.email }}</p>
            </div>
            
            <div style="padding: 1.5rem;">
                <h3>Rôles</h3>
                <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap; margin-top: 1rem;">
                    {% for role in user.roles %}
                        <span style="background: #4a90e2; color: white; padding: 0.5rem 1rem; border-radius: 20px;">
                            <i class="fas fa-shield-alt"></i> {{ role.name }}
                        </span>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-8">
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-info-circle"></i> Informations personnelles</h2>
            </div>
            
            <table style="width: 100%;">
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem; font-weight: bold;">Prénom</td>
                    <td style="padding: 1rem;">{{ user.first_name or '-' }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem; font-weight: bold;">Nom</td>
                    <td style="padding: 1rem;">{{ user.last_name or '-' }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem; font-weight: bold;">Email</td>
                    <td style="padding: 1rem;">{{ user.email }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem; font-weight: bold;">Date d'inscription</td>
                    <td style="padding: 1rem;">{{ user.created_at.strftime('%d/%m/%Y') if user.created_at else '-' }}</td>
                </tr>
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem; font-weight: bold;">Dernière connexion</td>
                    <td style="padding: 1rem;">{{ user.last_login.strftime('%d/%m/%Y %H:%M') if user.last_login else 'Jamais' }}</td>
                </tr>
                <tr>
                    <td style="padding: 1rem; font-weight: bold;">Statut</td>
                    <td style="padding: 1rem;">
                        {% if user.active %}
                            <span style="color: #50c878;"><i class="fas fa-check-circle"></i> Actif</span>
                        {% else %}
                            <span style="color: #e74c3c;"><i class="fas fa-times-circle"></i> Inactif</span>
                        {% endif %}
                    </td>
                </tr>
            </table>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h3><i class="fas fa-chart-bar"></i> Statistiques</h3>
            </div>
            
            <div class="row">
                <div class="col-6">
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-box" style="font-size: 3rem; color: #4a90e2;"></i>
                        <h2 style="color: #4a90e2; margin-top: 1rem;">{{ user.products|length }}</h2>
                        <p>Produits créés</p>
                    </div>
                </div>
                
                <div class="col-6">
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-file" style="font-size: 3rem; color: #50c878;"></i>
                        <h2 style="color: #50c878; margin-top: 1rem;">{{ user.uploads|length }}</h2>
                        <p>Fichiers uploadés</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
